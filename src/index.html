<html lang="en">

  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta id="viewport" name="viewport" content="width=device-width, user-scalable=no, initial-scale=1, minimum-scale=1, maximum-scale=1" />
    <meta charset="UTF-8" />
    <base href="/">

    <!-- Tittle -->
    <title>Ambrosus - Trusted Quality of Food &amp; Medicine</title>
    <!--Google fonts-->
    <link href="https://fonts.googleapis.com/css?family=Roboto:400,500,700" rel="stylesheet">

    <!--SEO-->
    <!--To change-->
    <meta class="mtitle" name="pagename" content="Ambrosus" />
    <meta class="mdesc" name="description" content="Combining sensors, blockchain protocol &amp; smart contracts, we&#039;re building a universally verifiable system to assure the quality, safety &amp; origins of products." />
    <meta class="mkey" name="keywords" content="blog" />
    <!--Open Graph-->
    <meta class="mtitle" property="og:title" content="Ambrosus" />
    <meta class="mdesc" property="og:description" content="Combining sensors, blockchain protocol &amp; smart contracts, we&#039;re building a universally verifiable system to assure the quality, safety &amp; origins of products." />
    <meta property="og:site_name" content="Ambrosus" />
    <!--HTML meta links-->
    <link class="murlhref" rel="canonical" href="http://ambrosus.com" />
    <link class="murlhref" rel="bookmark" title="Ambrosus" href="http://ambrosus.com" />

    <!--Not to change-->
    <meta name="HandheldFriendly" content="True" />
    <meta name="MobileOptimized" content="320">
    <meta name="mobile-web-app-capable" content="yes" />
    <meta name="robots" content="noimageindex" />
    <meta name="robots" content="follow" />
    <meta name="robots" content="noodp" />
    <meta class="murl" property="og:url" content="./assets/img/image-share.jpg" />
    <!-- Open Graph -->
    <meta property="og:image" content="./assets/img/image-share.jpg" />
    <meta property="og:image:type" content="image/jpg" />
    <meta property="og:image:width" content="2400" />
    <meta property="og:image:height" content="1260" />
    <meta property="og:locale" content="en_EN" />
    <meta property="og:type" content="website" />
    <!-- HTML meta links -->
    <link rel="image_src" href="./assets/img/image-share.jpg" />
    <!-- Apple -->
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-touch-fullscreen" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="#ffffff" />
    <!-- Favicon -->
    <link rel="apple-touch-icon" sizes="180x180" href="./assets/favicons/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="./assets/favicons/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="./assets/favicons/favicon-16x16.png">
    <link rel="mask-icon" href="./assets/favicons/safari-pinned-tab.svg" color="#002c87">
    <link rel="manifest" href="manifest.json">
  </head>

  <body>
    <app-root></app-root>
    <!-- SDK -->
    <script src="./assets/js/web3.min.js"></script>
    <script>
      (function(a, b) { 'object' == typeof exports && 'undefined' != typeof module ? module.exports = b() : 'function' == typeof define && define.amd ? define(b) : a.AmbrosusSDK = b() })(this, function() {
        'use strict';
        var a = Math.floor,
          b = function(a) {
            return new Promise(function(b, c) {
              var d = { status: a.status, data: null, message: JSON.parse(a.response).reason };
              (200 === a.status || 201 === a.status) && (d.data = JSON.parse(a.response), d.message = 'success', b(d)), c(d)
            })
          },
          c = function(a) { return { status: 400, data: null, message: a } },
          d = function(a) { return { status: 200, data: a, message: 'success' } },
          e = function(a) { this._settings = a };
        e.prototype.getRequest = function(a) {
          var c = this;
          return new Promise(function(d, e) {
            var f = new XMLHttpRequest;
            if (f.open('GET', c._settings.apiEndpoint + '/' + a, !0), c._settings.headers)
              for (var g in c._settings.headers) f.setRequestHeader('' + g, '' + c._settings.headers[g]);
            f.addEventListener('load', function() { b(f).then(function(a) { return d(a) }).catch(function(a) { return e(a) }) }, !1), f.send()
          })
        }, e.prototype.postRequest = function(a, c) {
          var d = this;
          return new Promise(function(e, f) {
            var g = new XMLHttpRequest;
            g.open('POST', d._settings.apiEndpoint + '/' + a, !0, d._settings), g.setRequestHeader('Content-type', 'application/json; charset=utf-8'), g.onload = function() { b(g).then(function(a) { return e(a) }).catch(function(a) { return f(a) }) }, g.send(JSON.stringify(c))
          })
        };
        var f = function(a) { return 0 < new Date(a).getTime() },
          g = function(b) { var c = a(Date.now() / 1e3); return b.content && b.content.idData && b.content.idData.timestamp && f(b.content.idData.timestamp) ? b.content.idData.timestamp : c },
          h = function(a) {
            return a.results.reduce(function(a, b) {
              var c = b.content,
                d = b.eventId,
                e = c.idData.timestamp,
                f = c.idData.createdBy;
              return c && c.data && c.data.filter(function(a) {
                var b = a.type.split('.'),
                  g = b[b.length - 1],
                  h = b[b.length - 2] || 'asset',
                  i = b[b.length - 3] || 'ambrosus';
                return a.timestamp = e, a.author = f, a.name = a.name || g, a.action = g, a.type = g, a.eventId = d, 'location' === a.type && 'event' === h ? void c.data.reduce(function(a, b) { 'location' !== b.type && (b.location = a) }, a) : a
              }).map(function(b) {-1 < ['info', 'redirection', 'identifiers', 'branding'].indexOf(b.type) ? (!a[b.type] || a[b.type].timestamp < b.timestamp) && (a[b.type] = b) : a.events.push(b) }), a
            }, { events: [] })
          },
          i = function(a) { var b = ''; for (var c in a) '' != b && (b += '&'), b += c + '=' + encodeURIComponent(a[c]); return b },
          j = function(a) { if (function(a) { return 'object' == typeof a && !Array.isArray(a) }(a)) { var b = Object.keys(a).sort().map(function(b) { return '"' + b + '":' + j(a[b]) }).join(','); return '{' + b + '}' } if (function(a) { return Array.isArray(a) }(a)) { var c = a.map(function(a) { return j(a) }).join(','); return '[' + c + ']' } return function(a) { return 'string' == typeof a }(a) ? '"' + a + '"' : a.toString() },
          k = function(a) {
            var b = String.fromCharCode;
            a = a.replace(/\r\n/g, '\n');
            for (var d, e = '', f = 0; f < a.length; f++) d = a.charCodeAt(f), 128 > d ? e += b(d) : 127 < d && 2048 > d ? (e += b(192 | d >> 6), e += b(128 | 63 & d)) : (e += b(224 | d >> 12), e += b(128 | 63 & d >> 6), e += b(128 | 63 & d));
            return e
          },
          l = function(a) {
            var b, c, d, e, f, g, h, j = '',
              l = 0;
            for (a = k(a); l < a.length;) b = a.charCodeAt(l++), c = a.charCodeAt(l++), d = a.charCodeAt(l++), e = b >> 2, f = (3 & b) << 4 | c >> 4, g = (15 & c) << 2 | d >> 6, h = 63 & d, isNaN(c) ? g = h = 64 : isNaN(d) && (h = 64), j = j + 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/='.charAt(e) + 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/='.charAt(f) + 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/='.charAt(g) + 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/='.charAt(h);
            return j
          },
          m = function(a) { try { return a.content.idData.accessLevel } catch (a) { return 0 } },
          n = function(a) { this._settings = a, this._request = new e(this._settings) };
        n.prototype.getAssetById = function(a) { var b = this; return new Promise(function(c, d) { b._request.getRequest('assets/' + encodeURIComponent(a)).then(function(a) { return c(a) }).catch(function(a) { return d(a) }) }) }, n.prototype.getAssets = function(a) { var b = this; return new Promise(function(c, d) { b._request.getRequest('assets?' + i(a)).then(function(a) { return c(a) }).catch(function(a) { return d(a) }) }) }, n.prototype.createAsset = function(a) { var b = this; return new Promise(function(c, d) { b._request.postRequest('assets', a).then(function(a) { return c(a) }).catch(function(a) { return d(a) }) }) };
        var o = function(a) { this._settings = a, this._request = new e(this._settings) };
        o.prototype.getEventById = function(a) { var b = this; return new Promise(function(c, d) { b._request.getRequest('events/' + encodeURIComponent(a)).then(function(a) { return c(a) }).catch(function(a) { return d(a) }) }) }, o.prototype.getEvents = function(a) { var b = this; return new Promise(function(c, d) { b._request.getRequest('events?' + i(a)).then(function(a) { return c(a) }).catch(function(a) { return d(a) }) }) }, o.prototype.createEvent = function(a, b) { var c = this; return new Promise(function(d, e) { c._request.postRequest('assets/' + a + '/events', b).then(function(a) { return d(a) }).catch(function(a) { return e(a) }) }) }, o.prototype.getBundleById = function(a) { var b = this; return new Promise(function(c, d) { b._request.getRequest('bundle/' + encodeURIComponent(a)).then(function(a) { return c(a) }).catch(function(a) { return d(a) }) }) };
        var p = function(a) { this._settings = a, this._request = new e(this._settings) };
        p.prototype.addAccount = function(a) { var b = this; return new Promise(function(c, d) { b._request.postRequest('accounts', a).then(function(a) { return c(a) }).catch(function(a) { return d(a) }) }) };
        var q = 0,
          r = function(a) {
            var b = this;
            for (var c in this._settings = { apiEndpoint: 'https://gateway-test.ambrosus.com' }, this.events = {}, this.empty = [], a) a.hasOwnProperty(c) && (b._settings[c] = a[c]);
            this._settings.Web3 && this._settings.secret ? (this.web3 = new this._settings.Web3, this.web3.version.api ? console.log('Old version of web3 is not supported, Please import v1.0.0+') : (this._settings.address = this.getAddress(this._settings.secret), this._settings.token = this.getToken(this._settings.secret))) : this._settings.Web3 && (this.web3 = new this._settings.Web3), this._assets = new n(this._settings), this._events = new o(this._settings), this._accounts = new p(this._settings)
          };
        return r.prototype.getToken = function(b, d) { if (!this.web3) return c('web3.js Library is required generate the token'); var e = { createdBy: this.getAddress(b), validUntil: d ? d : a(Date.now() / 1e3) + 300 }; return l(j({ signature: this.sign(e, b), idData: e })) }, r.prototype.getAddress = function(a) { return this.web3 ? this.web3.eth.accounts.privateKeyToAccount(a).address : c('web3.js Library is required get the address') }, r.prototype.sign = function(a, b) { return this.web3 ? this.web3.eth.accounts.sign(j(a), b).signature : c('web3.js Library is required get the signature') }, r.prototype.getPkPair = function() { return this.web3 ? this.web3.eth.accounts.create(this.web3.utils.randomHex(32)) : c('web3.js Library is required generate the publicKey / privateKey pair') }, r.prototype.getAssetById = function(a) { var b = this; return new Promise(function(d, e) { return a ? b._assets.getAssetById(a).then(function(a) { return d(a) }).catch(function(a) { return e(a) }) : e(c('Asset ID is missing.')) }) }, r.prototype.getEventById = function(a) { var b = this; return new Promise(function(d, e) { return a ? b._events.getEventById(a).then(function(a) { return d(a) }).catch(function(a) { return e(a) }) : e(c('Event ID is missing.')) }) }, r.prototype.getAssets = function(a) { var b = this; return void 0 === a && (a = {}), new Promise(function(c, d) { return b._assets.getAssets(a).then(function(a) { return c(a) }).catch(function(a) { return d(a) }) }) }, r.prototype.getEvents = function(a) { var b = this; return new Promise(function(c, d) { return b._events.getEvents(a).then(function(a) { return c(a) }).catch(function(a) { return d(a) }) }) }, r.prototype.createAsset = function(a) {
          var b = this;
          return void 0 === a && (a = {}), new Promise(function(d, e) {
            var f = {};
            if (!b.web3) return e(c('web3.js library is required to create an asset'));
            if (!b._settings.secret) return e(c('Secret missing: Please initialize the SDK with your secret key'));
            f = { timestamp: g(event), sequenceNumber: q = (q + 1) % 1e6, createdBy: b._settings.address }, a && a.content && a.content.data && (f.dataHash = b.web3.eth.accounts.hashMessage(j(a.content.data)));
            var h = { content: { idData: f, signature: b.sign(f, b._settings.secret) } };
            return h.content && h.content.idData && h.content.idData.dataHash && (h.content.data = a.content.data), b._assets.createAsset(h).then(function(c) { return 1 <= a.length ? void(a.map(function(a) { return b.createEvent(c.data.assetId, a).then(function(a) { return d(a) }).catch(function(a) { return e(a) }) }), b.emit('asset:created'), d(c)) : (b.emit('asset:created'), void d(c)) }).catch(function(a) { return e(a) })
          })
        }, r.prototype.createEvent = function(a, b) {
          var d = this;
          return new Promise(function(e, f) {
            if (!d.web3) return f(c('web3.js library is required to create an event'));
            if (!d._settings.secret) return f(c('Secret missing: Please initialize the SDK with your secret key'));
            if (!a) return f(c('Asset ID is missing.'));
            if (!b) return f(c('Event data is missing.'));
            var h = {};
            if (b.content && b.content.data) {
              var i = { assetId: a, timestamp: g(b), accessLevel: m(b), createdBy: d._settings.address, dataHash: d.web3.eth.accounts.hashMessage(j(b.content.data)) };
              h = { content: { idData: i, signature: d.sign(i, d._settings.secret), data: b.content.data } }
            } else return f(c('Invalid data: No content found at content.data.'));
            return d._events.createEvent(a, h).then(function(a) { d.emit('event:created'), e(a) }).catch(function(a) { return f(a) })
          })
        }, r.prototype.parseEvents = function(a) { return new Promise(function(b, e) { return a && a.results ? b(d(h(a))) : e(c('Results array is missing.')) }) }, r.prototype.getBundleById = function(a) { var b = this; return new Promise(function(d, e) { return a ? b._events.getBundleById(a).then(function(a) { return d(a) }).catch(function(a) { return e(a) }) : e(c('Bundle ID is missing.')) }) }, r.prototype.setTokenHeader = function(a) { return a ? void(this._settings.headers = { Authorization: 'AMB_TOKEN ' + this.getToken(a) }) : c('Secret is required to generate the token') }, r.prototype.on = function(a, b, c) { return (this.events[a] = this.events[a] || []).push([b, c]), this }, r.prototype.off = function(a, b) { a || (this.events = {}); for (var c = this.events[a] || this.empty, d = c.length = b ? c.length : 0; d--;) b === c[d][0] && c.splice(d, 1); return this }, r.prototype.emit = function(a) { for (var b, c = arguments, d = this, f = this.events[a] || this.empty, e = 0 < f.length ? f.slice(0, f.length) : f, g = 0; b = e[g++];) b[0].apply(b[1], d.empty.slice.call(c, 1)); return this }, r
      });

    </script>
  </body>

</html>
