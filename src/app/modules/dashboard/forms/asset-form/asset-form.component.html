<!--
Copyright: Ambrosus Technologies GmbH
Email: tech@ambrosus.com
This Source Code Form is subject to the terms of the Mozilla Public License, v. 2.0.
If a copy of the MPL was not distributed with this file, You can obtain one at https://mozilla.org/MPL/2.0/.
This Source Code Form is “Incompatible With Secondary Licenses”, as defined by the Mozilla Public License, v. 2.0.
-->
<form class="form" [formGroup]="assetForm" (ngSubmit)="save()">

  <section>
    <h5 style="margin-bottom: 25px;">Information</h5>
    <label>
      <span>Name *</span>
      <input formControlName="name" type="text">
    </label>
    <label>
      <span>Asset type</span>
      <input formControlName="assetType" type="text">
    </label>
    <label>
      <span>Access level</span>
      <input formControlName="accessLevel" type="number" min="0">
    </label>
    <label>
      <span>Description</span>
      <textarea formControlName="description" rows="1"></textarea>
    </label>

    <h5 style="margin: 50px 0 25px">Images</h5>
  </section>

  <section style="background: #fafafa;">
    <h2 style="margin-bottom: 24px;">Properties</h2>
    <div class="title-options">
      <div>
        <h5>Content</h5>
      </div>
      <div>
        <ul>
          <li (click)="addGroup()">+ Add Group</li>
        </ul>
      </div>
    </div>

    <!-- Properties -->
    <div formArrayName="properties" class="right">
      <div class="group" *ngFor="let property of assetForm.get('properties')['controls']; let i = index" [formGroupName]="i">
        <label class="w50">
          <span>Name</span>
          <input formControlName="name" type="text" />
        </label>
        <label class="w50">
          <span>Value</span>
          <input formControlName="value" type="text" />
          <a class="remove" (click)="remove('properties', i)" *ngIf="i !== 0">&times;</a>
        </label>
      </div>
      <a class="addMore" (click)="addProperty()">+ Add more</a>
    </div>

    <!-- Groups -->
    <div formArrayName="groups" class="right" style="margin-top: 25px;">
      <div *ngFor="let group of assetForm.get('groups')['controls']; let i = index" [formGroupName]="i">
        <label>
          <span>Group name</span>
          <input formControlName="title" type="text" />
          <a class="remove" (click)="remove('groups', i)">&times;</a>
        </label>
        <div formArrayName="content">
          <div class="group" *ngFor="let property of group.get('content')['controls']; let j = index" [formGroupName]="j">
            <label class="w50">
              <span>Name</span>
              <input formControlName="name" type="text" />
            </label>
            <label class="w50">
              <span>Value</span>
              <input formControlName="value" type="text" />
              <a class="remove" (click)="removeGroupProperty(i, j)" *ngIf="j !== 0">&times;</a>
            </label>
          </div>
        </div>
        <a class="addMore" (click)="addGroupProperty(i)">+ Add more</a>
      </div>
    </div>
  </section>

  <!-- Identifiers -->
  <section>
    <h5 style="margin-bottom: 25px;">Identifiers</h5>
    <div formArrayName="identifiers" class="right">
      <div class="group" *ngFor="let identifier of assetForm.get('identifiers')['controls']; let i = index" [formGroupName]="i">
        <label class="w50">
          <span>Name</span>
          <input formControlName="name" [appAutocompleteinput]="{ control: identifier.get('name'), array: identifiersAutocomplete }" type="text" />
        </label>
        <label class="w50">
          <span>Value</span>
          <input formControlName="value" type="text" />
          <a class="remove" (click)="remove('identifiers', i)" *ngIf="i !== 0">&times;</a>
        </label>
      </div>
      <a class="addMore" (click)="addIdentifier()">+ Add more</a>
    </div>
  </section>

  <!-- <ul class="accordions">

    <li class="accordion">
      <h5 class="accordion__title active" appAccordion>
        <span>Information</span>
        <img src="/assets/raster/arrow-down.png">
      </h5>
      <div class="accordion__content active">

        <h5>Identifiers (optional)</h5>
        <div formArrayName="identifiers" class="right">
          <div *ngFor="let identifier of assetForm.get('identifiers')['controls']; let i = index" [formGroupName]="i">
            <button type="button" class="remove" (click)="remove('identifiers', i)">&times;</button>
            <label style="position: relative;">Identifier
              <input formControlName="name" [appAutocompleteinput]="{ control: identifier.get('name'), array: identifiersAutocomplete }" type="text">
            </label>
            <label>Value
              <input formControlName="value" type="text">
            </label>
          </div>
          <button type="button" class="addMore" (click)="addIdentifier()">+ Add identifier</button>
        </div>
      </div>
    </li>

    <li class="accordion">
      <h5 class="accordion__title" appAccordion>
        <span>Images (optional)</span>
        <img src="/assets/raster/arrow-down.png">
      </h5>
      <div class="accordion__content right" formArrayName="images">
        <div *ngFor="let image of assetForm.get('images')['controls']; let i = index" [formGroupName]="i">
          <button type="button" class="remove" (click)="remove('images', i)" *ngIf="i > 0">&times;</button>
          <label>Image name
            <input formControlName="name" type="text">
          </label>
          <label>Image URL
            <input formControlName="url" type="url">
          </label>
        </div>
        <button type="button" class="addMore" (click)="addImage()">+ Add image</button>
      </div>
    </li>



    </li>
  </ul> -->

  <section class="right">
    <button type="button" class="transparent light" (click)="cancel()" style="margin-right: 10px;">Cancel</button>
    <button type="submit">Create</button>
  </section>
</form>
